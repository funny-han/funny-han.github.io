---
date: 2025-03-06
---

### 第 0 章：引言

欢迎阅读《Django 新手入门》，本书采用基于项目的方法，帮助你学习使用 Django 进行 Web 开发。[Django](https://djangoproject.com/)[^1] 是一个用 Python 编写的免费开源 Web 框架，从学生、初创企业创始人到世界上大型的网站（如 Instagram、YouTube、Reddit、Netflix、Dropbox 和 Spotify），都在使用它。其 “内置电池 ”的理念，即自带诸多功能，为你提供了快速创建强大的实际 Web 应用所需的所有内置功能，因此它的口号是 “为赶时间的完美主义者打造的 Web 框架”。

对于新手来说，Django 丰富的功能可能会让人应接不暇。官方的[投票教程](https://docs.djangoproject.com/zh-hans/5.1/intro/tutorial01/)[^2]和[官方文档](https://docs.djangoproject.com/zh-hans/5.1/)[^3]面向的是中高级 Web 开发人员，而非初学者，这无疑让新手的学习之路更加艰难。

好消息是，作为一个 “松耦合 ”的框架，Django 的组件既可以独立工作，也可以协同工作，具有高度的模块化。换句话说，你只需使用（并学习）你需要的部分。即便是拥有多年经验的专业开发人员，也只会用到该框架提供的部分功能；因为它功能繁多、应用广泛，单个项目根本用不到全部功能。

不过你会发现，几乎每个 Django 网站都会涉及一些相同的模式和任务：创建并构建新项目的结构、连接和查询数据库、添加逻辑、执行 CRUD（创建-读取-更新-删除）操作、处理用户账户和表单等等。Django 并不需要让人望而生畏，事实上也不应该如此！几乎每一个可以想到的用例，都有内置的解决方案：这正是文档的作用所在！然而，即便是编写了大部分文档的原作者和核心开发人员，也无法记住所有内容，你也不必尝试这么做！

本书最初是我构建 Django 项目时的个人笔记。我花了很长时间才理解并熟悉 Django 的结构。对我来说，巩固理解的最佳方式，就是专注于新的概念或技能，逐步创建更复杂的项目。最终，我将这些笔记整理成一系列博客文章发布。鉴于文章颇受欢迎，我便创作了本书，如今已经是第五版。

在本书中，你将学习如何构建、测试和部署六个逐渐复杂的 Web 应用程序。我们将从一个 “Hello, World” 应用程序开始，最后构建一个真实的报纸网站，将书中涵盖的所有基本概念和技术联系在一起，包括模型、视图、URL、模板、表单、用户账户、权限等等。在学完本书后，你应该能够自信地从头开始创建 Django 项目，并且具备利用更高级的学习资源，填补任何知识空白的基础。

#### 为什么学习 Django？

Django 最初于 2003 年秋季，在劳伦斯世界日报（Lawrence Journal-World）开发，以著名爵士吉他手 Django Reinhardt 的名字命名，并于 2005 年 7 月作为免费开源项目发布。如今，它已有近二十年的历史，从软件的角度来看，已经相当成熟。但它仍在不断发展，而且可以说，如今的活跃度比以往任何时候都高。每周，都有十几项新的代码提交被纳入该框架，每月会发布安全和错误修复更新，每八个月会有一次重大的新版本发布。庞大的[第三方包](https://djangopackages.org/)[^4]生态系统，为核心框架之外提供了更多功能。

Django 是用可读性强且功能强大的 Python 编程语言编写的，Python 可以说是当今世界上最受欢迎的语言。Python 是大多数本科计算机科学课程的默认选择，是数据科学和人工智能领域的主导语言，在科学研究中也被广泛应用。其易用性和广泛的适用性，使得 Python 几乎适用于任何任务。

Django 继承了 Python “内置电池 ” 的理念，为 Web 开发中的日常任务提供了广泛的内置功能，包括：

- **对象关系映射器（ORM）**：通过编写 Python 代码，而非原生 SQL 语句，来创建和查询数据库表。
- **身份验证**：一个功能完备且安全的系统，用于处理用户账户、用户组、权限以及基于 cookie 的用户会话。
- **模板引擎**：采用简单的语法，通过添加变量和逻辑，创建动态 HTML 页面。
- **表单**：功能强大的表单库，能够处理表单的渲染和验证。
- **URL 路由**：简洁、优雅的 URL 模式，易于维护和理解。
- **管理界面**：一种可视化方式，用于与所有网站数据进行交互，包括用户数据和数据库表。
- **国际化**：支持多语言，以及特定区域设置的日期、时间、数字和时区格式化。
- **安全性**：防范 SQL 注入、跨站脚本攻击、跨站请求伪造、点击劫持和远程代码执行等安全威胁。

这种方式使 Web 开发人员能够专注于 Web 应用程序的独特之处，而无需每次都重新发明轮子。数以百万计的用户已经使用并测试了这些必要的代码，所以你可以放心，它既安全又高效。

相比之下，一些 Web 框架（如 [Flask](https://flask.palletsprojects.com/en/stable/)[^5]采用微框架的方式，只为简单网页提供最基本的功能。Flask 比 Django 轻量得多，灵活性极高；然而，这对开发者来说是有代价的。构建一个简单的 Flask 网站，需要添加十几个甚至更多的第三方包，而这些包的版本可能不是最新的，安全性和可靠性也难以保证。此外，由于缺乏规范，Flask 项目的结构差异很大，这使得在不同项目之间切换时，难以保持最佳实践。Flask 是一个不错的 Web 框架选择，只是与功能完备的 Django 相比，各有优劣。

在经验丰富的 Django 开发者中，流传着这样一句话：“因框架而来，为社区而留。” 这确实是真的！Django 拥有一个异常热情友好的[社区](https://forum.djangoproject.com/)[^6]，面向各级程序员。每年，在各大洲由志愿者组织的 DjangoCon 大会、活跃的论坛以及主要城市定期举行的聚会上，都能看到这个社区的身影。与其他由公司或个人运营的开源项目不同，Django 是由 [Django 软件基金会](https://www.djangoproject.com/foundation/)[^7]作为非营利组织进行管理的，其目标是推广、支持和推动这个 Web 框架的发展。基金会的董事会成员每年由社区投票选出。

数以百万计的程序员已经使用 Django 构建了他们的网站，每年还有数百万人选择它，因为当你可以依靠一个由优秀开发者组成的庞大社区，为你完成那些繁重的工作时，重新发明轮子就没有意义了。

#### 先决条件

阅读本书，你无需具备 Python 或 Web 开发的经验。即使是编程和 Web 开发的新手，也能跟着学习，感受从头开始编写 Web 应用程序的魅力。不过，熟悉基础的 Python、HTML 和 CSS，将有助于你更好地理解核心概念。书中会在 Django 与其他 Web 框架存在差异的地方，给出相应的参考；最明显的例子就是，Django 采用的 MVT（模型-视图-模板）模式，与主流的 MVC（模型-视图-控制器）模式略有不同。在开始编写代码后，我们会详细介绍这些差异。

#### Django 5 有哪些新特性？

Django 5.0 于 2023 年 12 月发布，官方支持 Python 3.10、3.11 和 3.12。需要注意的是，Django 的版本[发布策略](https://www.djangoproject.com/download/#supported-versions)[^8]是基于时间，而非功能特性。大约每八个月会发布一次新的功能版本，同时根据需要每月发布错误修复和安全补丁。Django 的功能版本发布，遵循 .0、.1、.2 的顺序，之后再回到 .0，也就是说，你可以预计 Django 5.1 会在 2024 年 8 月发布，Django 5.2 会在 2025 年 4 月发布，Django 6.0 会在 2025 年 12 月发布，以此类推。Django 有一个庞大且活跃的贡献者社区，因此多年前就决定专注于定期发布新版本，而不是等待特定功能全部完成。

特定版本（以 .2 结尾的版本，如 Django 5.2 和 6.2）被指定为长期支持（LTS）版本，在一定时期内（通常为三年），会持续获得安全和数据丢失修复支持。这个政策是为那些难以跟上 Django 快速发布节奏的大公司制定的。不过，如果你有条件的话，最好的安全策略还是使用最新版本，而非 LTS 版本。

那么，Django 5.0 有哪些新特性呢？最显著的变化是表单字段的渲染，现在大大简化了。管理界面中添加了分面筛选功能，使 UI 筛选更加便捷；支持数据库计算默认值；官方支持 Python 3.10、3.11 和 3.12。多年来，Django 逐渐增加了异步支持，在这个版本中，身份验证模块添加了一个新的异步函数，用于控制用户认证。不过，对于升级到最新版本的开发者来说，最明显的变化可能是，注销链接现在必须使用 POST 请求，而不是 GET 请求。

Django 是一个成熟的 Web 框架，它在努力保持稳定的同时，也紧跟现代 Web 的发展步伐。如果你参与的项目使用的是旧版本的 Django，官方有[详细的升级说明](https://docs.djangoproject.com/zh-hans/5.1/howto/upgrade-version/)[^9]，指导你更新到最新版本。

#### 本书结构

本书第 1 章，将展示如何为 Windows 和 macOS 配置本地开发环境。然后，我们会学习强大的命令行、Git、配置文本编辑器，以及如何安装最新版本的 Python 和 Django。

在第 2 章，我们会先回顾网站和 Web 框架的工作原理，再深入了解 Django 的架构。接着，我们将构建第一个项目 —— 一个简单的 “Hello, World” 网站，同时学习视图、URL 和应用程序的相关知识。我们还会使用 Git 保存工作成果，并将副本上传到 GitHub 上的远程代码仓库。

在第 3 章，我们将制作、测试并部署一个个人网站，这个过程会引入基于函数的视图、模板以及 Django 模板语言。我们会探索模板上下文，并使用 Django 内置的测试框架编写第一个测试用例。

第 4 章将介绍基于类的视图、模板继承以及更高级的测试模式，我们会通过构建一个公司网站来学习这些知识。在转向 Django 模型和数据库支持的网站开发之前，这是最后一个项目。

在第 5 章，我们将构建第一个基于数据库的项目 —— 一个留言板网站。Django 提供了强大的 ORM（对象关系映射器），让我们无需编写原生 SQL 代码。我们只需在 models.py 文件中编写 Python 代码，ORM 会自动将其翻译成适用于多种数据库后端（PostgreSQL、MySQL、SQLite、MariaDB 和 Oracle）的正确 SQL 语句。我们还会探索内置的管理应用程序，它提供了一种图形化方式来与数据进行交互。当然，我们也会为所有代码编写测试用例，并将远程副本存储在 GitHub 上。

在第 6 - 8 章，我们将构建一个博客网站，实现 CRUD（创建-读取-更新-删除）功能。我们会先使用基于函数的视图，然后切换到 Django 的通用基于类的视图，这样只需编写少量实际代码。之后，我们会添加表单，并集成 Django 内置的用户认证系统，实现注册、登录和注销功能。

本书的其余部分，将致力于构建和部署一个可用于生产环境的报纸网站。第 9 章将展示如何使用自定义用户模型设置新项目，并编写相应的测试用例。第 10 章涵盖完整的用户认证流程，包括登录、注销和注册；第 11 章会添加 Bootstrap，用于增强 CSS 样式。第 12 章实现通过电子邮件重置和更改密码的功能；在第 13 - 15 章，我们会添加文章、评论、适当的权限和授权功能。最后，第 16 章将介绍如何进行生产环境的部署。

本书的结论部分，将概述书中介绍的核心概念，并列出推荐的进一步学习资源。虽然你可能很想跳着阅读本书，但我建议你按顺序阅读各章节。每一章都会介绍一个新概念，并基于前面的内容逐步深入。

学完本书后，你将对 Django 有扎实的理解，能够构建自己的应用程序，并且具备利用更多学习资源，深入学习 Django 中级和高级技术的基础。

#### 本书排版

本书中有许多代码示例，格式如下：

```python
# 这是Python代码
print("Hello, World!")
```

为简洁起见，当现有代码未发生变化时，我们会使用省略号（...）表示。发生变化的代码部分，会使用 `# new` 注释突出显示。

```python
def make_my_website:
    print("All done!")  # new
```

#### 遇到问题怎么办

每个程序员，无论水平高低，都会遇到问题。在职业生涯中，随着经验的积累，唯一的变化只是问题的难度。学会如何成为一名更优秀的开发者，其中一部分就是要接受这种挫败感，寻求帮助，提出有针对性的问题，并判断何时最好暂时离开电脑，出去走走，清醒一下头脑。

好消息是，无论你遇到什么错误，很可能都不是第一个遇到的人！将错误信息复制粘贴到搜索引擎（如谷歌或 DuckDuckGo）中，通常会搜索到 StackOverflow 或个人博客上，详细描述相同问题的内容。经验丰富的程序员常开玩笑说，他们与初级程序员的区别，就在于能更快地在网上搜索到答案，这确实有一定道理。

当然，网上的信息并非都可信。随着经验的积累，你将具备辨别能力，明白 Django 的各个部分和代码是如何协同工作的。

如果你在阅读本书时遇到问题，该怎么办呢？首先，仔细对照书中内容检查你的代码。如果仍然无法解决，可以查看官方源代码，代码可[在 GitHub 上获取](https://github.com/wsvincent/djangoforbeginners)[^10]。一个常见的错误是，细微的空白差异，这几乎无法用肉眼察觉。如果你怀疑是这个问题，可以尝试复制粘贴官方源代码。

接下来，你可以暂时离开电脑，甚至把问题留到第二天再解决。在解决问题时，短暂的休息和放松，会对你的思维产生意想不到的效果。

有两个很棒的在线资源，Django 社区的成员会在上面提问和解答。第一个是 [Django 官方论坛](https://forum.djangoproject.com/)[^11]，第二个是 [Django 用户谷歌小组](https://groups.google.com/g/django-users)[^12]。如果你需要更多帮助，这两个平台都是很好的选择。

#### 社区

Django 的成功，离不开其社区的贡献，就如同它自身的技术成就一样重要。“因框架而来，为社区而留”，是 Django 开发者中广为流传的一句话。这一理念，也延伸到了 Django 的技术开发中，相关工作通过 [django-developers 邮件列表](https://docs.djangoproject.com/en/dev/internals/mailing-lists/#django-developers-mailing-list)[^13]在网上进行，由非营利性的 [Django 软件基金会](https://www.djangoproject.com/foundation/)[^14]监督管理。此外，每年的 DjangoCon 大会，以及各地开发者聚集分享知识和见解的本地聚会，都是社区活力的体现。

无论你的技术水平如何，参与 Django 社区都是一个学习、结识其他开发者，以及提升个人声誉的好方法。

#### 结论

在下一章中，你将学习如何正确设置计算机，并创建第一个 Django 项目。让我们开始吧！

[^1]: https://djangoproject.com/
[^2]: https://docs.djangoproject.com/zh-hans/5.1/intro/tutorial01/
[^3]: https://docs.djangoproject.com/zh-hans/5.1/
[^4]: https://djangopackages.org/
[^5]: https://flask.palletsprojects.com/en/stable/
[^6]: https://forum.djangoproject.com/
[^7]: https://www.djangoproject.com/foundation/
[^8]: https://www.djangoproject.com/download/#supported-versions
[^9]: https://docs.djangoproject.com/zh-hans/5.1/howto/upgrade-version/
[^10]: https://github.com/wsvincent/djangoforbeginners
[^11]: https://forum.djangoproject.com/
[^12]: https://groups.google.com/g/django-users
[^13]: https://docs.djangoproject.com/en/dev/internals/mailing-lists/#django-developers-mailing-list
[^14]: https://www.djangoproject.com/foundation/